その要件の実装箇所を確認しましょう。戦闘システムが既に実装されているようなので、まず現在のファイル構造を確認します。 扇形エリア内のチェック機能を探しましょう： 重要な部分が見つかりました！`getEnemiesInTriggerArea`メソッドで扇形エリア内のチェックを行っています。続きを確認しましょう： 完璧です！扇形エリア内のチェック機能は**`isCharacterInTriggerArea`メソッド**で実装されています。このメソッドが要件の核心部分を担当しています。

さらに、いつこのチェックが実行されるかを確認しましょう： 戦闘チェックがいつ実行されるかを確認しましょう： 戦闘チェックがコメントアウトされているようです。現在の`completeActionPhase`を確認しましょう： ## 📍 **要件の実装状況**

**質問**: 「相手のキャラクターが扇形のエリア内に入った場合、その扇形のトリガーで攻撃を行う」のチェック実装場所

**回答**: 実装は以下の場所で行われています：

### 🎯 **実装箇所**

1. **メインの戦闘チェック**: combatSystem.tsの`checkCombatTriggers()`メソッド
   - 全キャラクターの戦闘判定を実行

2. **扇形エリア内判定**: combatSystem.tsの`isCharacterInTriggerArea()`メソッド
   ```typescript
   private isCharacterInTriggerArea(
     character: Phaser.GameObjects.Image,
     characterPosition: Position,
     triggerArea: TriggerArea
   ): boolean {
     // 距離チェック（半径内にいるか）
     // 角度チェック（扇形の角度内にいるか）
   }
   ```

3. **実行タイミング**: GameGrid.tsxの`completeActionPhase()`
   - **現在はコメントアウト状態**：`// this.executeCombatChecks();`

### 🔧 **実装の詳細**

#### 扇形エリア判定ロジック
1. **距離チェック**: キャラクター間の距離が半径（3ヘックス）以内か
2. **角度チェック**: キャラクターがトリガーの扇形（60度）内にいるか
3. **敵味方判定**: 攻撃者と異なる陣営のキャラクターか

#### 問題：戦闘チェックが無効化されている
現在、`completeActionPhase()`で戦闘チェックがコメントアウトされているため、**実際には戦闘が発動していません**。

### 💡 **解決案**

戦闘機能を有効にするには、以下の修正が必要です：

```typescript
// completeActionPhase()内
// this.executeCombatChecks(); ← これを有効化
this.executeCombatChecks(); // コメントアウトを解除
```

戦闘チェックを有効化しますか？